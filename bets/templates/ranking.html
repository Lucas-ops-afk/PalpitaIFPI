{% extends 'base.html' %}

{% block title %}Ranking - PalpitaIFPI{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>üèÜ Ranking Geral</h2>
    <div style="font-size: 12px; color: #888;">Top Jogadores</div>
</div>

{% if top %}
    <div class="ranking-container">
        <table class="ranking-table">
            <thead>
                <tr>
                    <th style="width: 50px; text-align: center;">Pos</th>
                    <th>Jogador</th>
                    <th>Medalhas</th>
                    <th style="text-align: right;">Experi√™ncia</th>
                    <th style="text-align: center;">N√≠vel</th>
                </tr>
            </thead>
            <tbody>
                {% for p in top %}
                    <tr>
                        <td style="text-align: center;">
                            {% if forloop.counter == 1 %}
                                <span class="rank-pos rank-1">ü•á 1</span>
                            {% elif forloop.counter == 2 %}
                                <span class="rank-pos rank-2">ü•à 2</span>
                            {% elif forloop.counter == 3 %}
                                <span class="rank-pos rank-3">ü•â 3</span>
                            {% else %}
                                <span class="rank-pos">#{{ forloop.counter }}</span>
                            {% endif %}
                        </td>
                        <td style="font-weight: 500; color: #fff;">
                            {{ p.user.username }}
                            {% if p.user == user %} <span style="font-size: 10px; color: var(--primary-yellow); margin-left: 5px;">(Voc√™)</span> {% endif %}
                        </td>
                        <td style="text-align: left;">
                            {% if p.medalhas.all %}
                                <span class="medalhas-list">
                                    {% for medalha in p.medalhas.all %}
                                        <img src="{{ medalha.imagem.url }}" alt="{{ medalha.nome }}" title="{{ medalha.nome }}" style="height:22px; width:22px; margin-right:2px; border-radius:50%; border:2px solid #FFD700; background:#fff;" />
                                    {% endfor %}
                                </span>
                            {% endif %}
                        </td>
                        <td style="text-align: right;">
                            <span class="xp-val">{{ p.xp }} XP</span>
                        </td>
                        <td style="text-align: center;">
                            <span class="level-badge">
                                NVL {{ p.nivel }}
                            </span>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="dashboard-card" style="text-align: center; padding: 40px;">
        <div style="font-size: 40px; margin-bottom: 10px;">üìâ</div>
        <p class="text-muted">
            O ranking ainda est√° vazio.<br>
            Seja o primeiro a fazer um palpite e conquiste o topo!
        </p>
        <a href="{% url 'listar_jogos' %}" class="btn" style="margin-top: 20px;">Come√ßar a Jogar</a>
    </div>
{% endif %}

<div style="margin-top: 30px;">
    <a href="{% url 'home' %}" class="btn btn-secondary">‚Üê Voltar para Home</a>
</div>
{% endblock %}