{% extends 'base.html' %}

{% block title %}Meus Palpites - PalpitaIFPI{% endblock %}

{% block content %}
<h2>ðŸŽ¯ Meus Palpites</h2>

{% if perfil %}
    <div class="dashboard-card" style="margin-top: 25px;">
        <h3>ðŸ“Š Minhas EstatÃ­sticas</h3>
        
        <div style="display: flex; gap: 30px; flex-wrap: wrap; margin-top: 15px;">
            
            <div>
                <strong style="color: var(--primary-yellow);">XP Total:</strong> <span class="xp-val">{{ perfil.xp }}</span><br>
                <strong style="color: var(--primary-yellow);">NÃ­vel:</strong> <span class="level-badge">{{ perfil.nivel }}</span>
            </div>
            
            <div>
                <strong style="color: var(--text-main);">Total de Palpites:</strong> {{ total_palpites }}<br>
                <strong style="color: var(--text-main);">Palpites Certos:</strong> <span style="color: var(--primary-green); font-weight: bold;">{{ palpites_certos }}</span>
            </div>
            
            <div>
                <strong style="color: var(--text-main);">Pontos Totais:</strong> <span class="xp-val">{{ total_pontos }}</span>
            </div>
        </div>
    </div>
{% endif %}

{% if palpites %}
    <div class="ranking-container" style="margin-top: 30px;">
        <table class="ranking-table">
            <thead>
                <tr>
                    <th>Jogo</th>
                    <th>Modalidade</th>
                    <th>Meu Palpite</th>
                    <th>Placar Final</th>
                    <th>Pontos (XP)</th>
                    <th>Data do Palpite</th>
                </tr>
            </thead>
            <tbody>
                {% for palpite in palpites %}
                    <tr class="{% if palpite.pontos > 0 %}palpite-certo{% endif %}">
                        <td>
                            <strong>{{ palpite.jogo.time1 }} x {{ palpite.jogo.time2 }}</strong>
                        </td>
                        <td>{{ palpite.jogo.modalidade.nome }}</td>
                        <td>
                            <strong style="color: var(--primary-yellow);">
                                {{ palpite.palpite_time1 }} x {{ palpite.palpite_time2 }}
                            </strong>
                        </td>
                        <td>
                            {% if palpite.jogo.placar_time1 is not None and palpite.jogo.placar_time2 is not None %}
                                <strong style="color: var(--primary-green);">
                                    {{ palpite.jogo.placar_time1 }} x {{ palpite.jogo.placar_time2 }}
                                </strong>
                            {% else %}
                                <em>Aguardando resultado</em>
                            {% endif %}
                        </td>
                        <td>
                            {% if palpite.pontos > 0 %}
                                <strong class="xp-val">+{{ palpite.pontos }} XP</strong>
                            {% else %}
                                <span style="color: var(--text-muted);">0 XP</span>
                            {% endif %}
                        </td>
                        <td><small style="color: var(--text-muted);">{{ palpite.criado_em|date:"d/m/Y H:i" }}</small></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="dashboard-card info-box" style="margin-top: 30px; text-align: center;">
        <p style="font-size: 1.2em; color: #aaddcc; margin-bottom: 20px; font-weight: 500;">
            VocÃª ainda nÃ£o fez nenhum palpite. ðŸ˜”
        </p>
        <a href="{% url 'listar_jogos' %}" class="btn">Ver Jogos DisponÃ­veis</a>
    </div>
{% endif %}

<div style="margin-top: 30px; display: flex; gap: 10px; flex-wrap: wrap;">
    <a href="{% url 'listar_jogos' %}" class="btn">Ver Todos os Jogos</a>
    <a href="{% url 'ranking' %}" class="btn" style="background: #333; border: 1px solid #555; color: #fff;">Ver Ranking</a>
</div>
{% endblock %}